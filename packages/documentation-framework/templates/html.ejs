<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
    <meta name="description" content="PatternFly is Red Hat's open source design system. It consists of components, documentation, and code for building enterprise applications at scale.">
    <title><%= title %></title>
    <link rel="shortcut icon" href="/assets/Favicon-Light.png" data-href-dark="/assets/Favicon-Dark.png" data-href-light="/assets/Favicon-Light.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/Favicon-Light-16x16.png" data-href-dark="/assets/Favicon-Dark-16x16.png" data-href-light="/assets/Favicon-Light-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/Favicon-Light-32x32.png" data-href-dark="/assets/Favicon-Dark-32x32.png" data-href-light="/assets/Favicon-Light-32x32.png">
    <link rel="icon" type="image/png" sizes="48x48" href="/assets/Favicon-Light-48x48.png" data-href-dark="/assets/Favicon-Dark-48x48.png" data-href-light="/assets/Favicon-Light-48x48.png">
    <link rel="manifest" href="/assets/manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#151515">
    <meta name="application-name" content="PatternFly docs">
    <%= htmlWebpackPlugin.tags.headTags %>
  </head>
  <body>
    <div id="root"><%= prerendering %></div>
    <%= htmlWebpackPlugin.tags.bodyTags %>
    <% if (algolia) { %>
    <script
      async
      crossorigin
      type="module"
      src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"
    ></script>
    <link
      href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"
      crossorigin
      rel="stylesheet"
      media="print"
      onload="this.media='all'; this.onload=null;"
    >
    <% } %>
    <% if (googleAnalyticsID) { %>
      <!-- Global site tag (gtag.js) - Google Analytics -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=<%= googleAnalyticsID %>"></script>
      <script>
        if(!(parseInt(navigator.doNotTrack) === 1 || parseInt(window.doNotTrack) === 1 || parseInt(navigator.msDoNotTrack) === 1 || navigator.doNotTrack === "yes")) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', '<%= googleAnalyticsID %>');
        }
      </script>
    <% } %>
    <script>
      (() => {
        if (window.matchMedia('(prefers-color-scheme)').media === 'not all') {
          return;
        }
        
        const favicons = document.querySelectorAll('link[rel*="icon"]');
        const darkModeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
        const updateFavicon = (darkModeOn) => {
          favicons.forEach((link) => {      
            link.href = darkModeOn ? link.dataset.hrefDark : link.dataset.hrefLight;   
          });
        };

        darkModeMediaQuery.addEventListener('change', (e) => {
          const darkModeOn = e.matches;
          console.log({darkModeOn, favicons});
          updateFavicon(darkModeOn);
        });

        // trigger on initial page load
        updateFavicon(darkModeMediaQuery.matches);
  })();

      
    </script>
  </body>
</html>
